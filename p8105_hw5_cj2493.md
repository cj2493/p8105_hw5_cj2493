p8105\_hw5\_cj2493
================
Courtney Johnson
November 6, 2018

Problem 1
---------

First, read in all the control arm files and experimental arm files. Then, tidy the data.

``` r
files_df = 
tibble(vec_files = list.files(path = "./data"), 
       vec_file_path = str_c("./data/", vec_files)) %>%
  mutate(observations = purrr::map(vec_file_path, read_csv)) %>%
  unnest() %>%
  janitor::clean_names() %>%
  separate(vec_files, into = c("arm", "subject"), sep = "_") %>%
  separate(subject, into = c("subject", "extension"), sep = "\\.") %>%
  select(-extension, -vec_file_path) %>%
  gather(key = week, value = measurement, week_1:week_8) %>%
  separate(week, into = c("word", "week"), sep = "_") %>%
  select(-word) %>%
  mutate(subject = as.factor(subject),
         arm = as.factor(arm),
         week = as.numeric(week)) 
```

Make a spaghetti plot showing observations on each subject over time, and comment on differences between groups.

``` r
files_df %>%
  ggplot(aes(x = week, y = measurement, color = subject)) +
  geom_line() +
  facet_grid(~arm)
```

<img src="p8105_hw5_cj2493_files/figure-markdown_github/spag_plot-1.png" width="90%" />

Problem 2
---------

``` r
# city_homicides = GET("https://raw.githubusercontent.com/washingtonpost/data-homicides/master/homicide-data.csv") %>%
  # content("parsed")

library(RCurl)
```

    ## Loading required package: bitops

    ## 
    ## Attaching package: 'RCurl'

    ## The following object is masked from 'package:tidyr':
    ## 
    ##     complete

``` r
city_homicides = read_csv(getURL("https://raw.githubusercontent.com/washingtonpost/data-homicides/master/homicide-data.csv")) 

city_homicides = city_homicides %>%
  janitor::clean_names() %>%
  mutate(city_state = str_c(city, ", ", state)) 
```

``` r
unsolved_summary = city_homicides %>%
  group_by(city_state) %>% 
  summarize(n = n(),
            sum_unsolved = sum(disposition == "Closed without arrest" | disposition == "Open/No arrest"))

baltimore_unsolved = unsolved_summary %>%
  filter(city_state == "Baltimore, MD")

prop_output = prop.test(baltimore_unsolved$sum_unsolved, baltimore_unsolved$n)
broom::tidy(prop_output)
```

    ## # A tibble: 1 x 8
    ##   estimate statistic  p.value parameter conf.low conf.high method
    ##      <dbl>     <dbl>    <dbl>     <int>    <dbl>     <dbl> <chr> 
    ## 1    0.646      239. 6.46e-54         1    0.628     0.663 1-sam~
    ## # ... with 1 more variable: alternative <chr>

``` r
baltimore_estimate = prop_output$estimate
baltimore_conf_int = prop_output$conf.int
```

Now do the same for all of the cities
